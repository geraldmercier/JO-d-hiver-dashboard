<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèîÔ∏è Dashboard Agent ‚Äî JO d'Hiver</title>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body class="dashboard-body">

    <header class="dashboard-header">
        <div class="header-container">
            <div class="header-logo">
                <span class="logo-icon">üèîÔ∏è</span>
                <div class="logo-text">
                    <h1>JO d'Hiver 2026</h1>
                    <p>Challenge Commercial</p>
                </div>
            </div>

            <div class="header-profil">
                <div class="profil-avatar">
                    <img src="" alt="Avatar" id="avatar-agent">
                    <span class="profil-drapeau" id="drapeau-equipe"></span>
                </div>
                <div class="profil-info">
                    <h2 class="profil-nom" id="nom-agent">Chargement...</h2>
                    <p class="profil-equipe" id="nom-equipe">...</p>
                </div>
                <div class="profil-score">
                    <div class="score-valeur" id="score-total">0</div>
                    <div class="score-label">points</div>
                </div>
                <div class="header-actions">
                    <button class="btn-deconnexion" id="btn-deconnexion">üö™ D√©connexion</button>
                </div>
            </div>
        </div>
    </header>

    <main class="dashboard-main">
        <div class="dashboard-container">

            <div class="colonne-gauche">

                <section class="carte carte-position">
                    <h3 class="carte-titre">üìä Votre Position</h3>
                    <div class="position-grid">
                        <div class="position-item">
                            <div class="position-label">Global</div>
                            <div class="position-valeur" id="rang-global">-</div>
                        </div>
                        <div class="position-item">
                            <div class="position-label">√âquipe</div>
                            <div class="position-valeur" id="rang-equipe">-</div>
                        </div>
                    </div>
                </section>

                <section class="carte carte-ski-fond">
                    <h3 class="carte-titre">‚õ∑Ô∏è Ski de Fond ‚Äî Fil Rouge</h3>
                    <div class="ski-fond-info">
                        <div class="ski-fond-kpi">
                            <div class="kpi-label">Volume</div>
                            <div class="kpi-valeur" id="ski-fond-valeur">0</div>
                        </div>
                    </div>
                </section>

                <section class="carte carte-performance-jour">
                    <h3 class="carte-titre">üéØ Aujourd'hui</h3>
                    <div class="epreuve-info">
                        <div class="epreuve-date" id="date-epreuve">...</div>
                    </div>
                    <div class="performance-grid">
                        <div class="perf-item">
                            <div class="perf-label">Score Jour</div>
                            <div class="perf-valeur score-actuel" id="score-jour">0 pts</div>
                        </div>
                    </div>
                </section>

                <section class="carte carte-equipe">
                    <h3 class="carte-titre">üö© Votre √âquipe</h3>
                    <div class="equipe-classement">
                        <div class="equipe-score" id="score-equipe">0 pts</div>
                    </div>
                    <div class="equipe-top3">
                        <h4>üèÜ Top 3 √âquipe</h4>
                        <ol class="top3-liste" id="top3-equipe">
                            </ol>
                    </div>
                </section>

                <section class="carte">
                    <div class="section-header">
                        <h3 class="carte-titre">‚ö° Challenges Flash</h3>
                        <span class="badge-info" id="badge-challenges-actifs" style="display:none">0</span>
                    </div>
                    <div id="challenges-container" class="challenges-container">
                        <div class="chargement">Recherche de challenges...</div>
                    </div>
                </section>

            </div>

            <div class="colonne-droite">

                <section class="carte carte-formulaire">
                    <h3 class="carte-titre">‚úÖ Enregistrer un Contrat</h3>
                    <form id="formulaire-contrat" class="form-contrat">
                        <div class="form-groupe">
                            <label>Type de contrat</label>
                            <select id="type-contrat" required>
                                <option value="">-- S√©lectionnez --</option>
                                <option value="Telco">Telco (Movers S1)</option>
                                <option value="Mobile">Mobile (Switchers S1)</option>
                                <option value="MRH">MRH (Movers S2)</option>
                                <option value="Compensation Carbone">Compensation Carbone</option>
                                <option value="Premium">Premium (Coachs)</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                        <div class="form-groupe">
                            <label>Lien Salesforce</label>
                            <input type="url" id="lien-piste" placeholder="https://..." required>
                        </div>
                        <div class="form-groupe checkbox-groupe">
                            <label class="checkbox-label">
                                <input type="checkbox" id="contrat-apiapp">
                                <span class="checkbox-text">üì± Contrat ApiApp</span>
                            </label>
                        </div>
                        <button type="submit" class="btn-enregistrer" id="btn-enregistrer">
                            <span id="btn-texte">‚úÖ Enregistrer</span>
                        </button>
                    </form>
                </section>

                <section class="carte carte-contrats-jour">
                    <h3 class="carte-titre">üìù Vos Contrats du Jour</h3>
                    <div class="contrats-liste" id="contrats-liste">
                        <div class="chargement">Chargement...</div>
                    </div>
                </section>

            </div>
        </div>
    </main>

    <style>
        .challenges-container { display: flex; flex-direction: column; gap: 15px; margin-top: 15px; }
        .challenge-card { background: linear-gradient(135deg, #FFB300 0%, #FF6F00 100%); color: white; padding: 15px; border-radius: 10px; position: relative; }
        .challenge-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        .challenge-titre { font-weight: bold; font-size: 1.1em; margin: 0; }
        .challenge-points { background: rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 10px; font-weight: bold; }
        .challenge-description { font-size: 0.9em; opacity: 0.9; margin-bottom: 10px; }
        .challenge-barre { background: rgba(0,0,0,0.2); height: 8px; border-radius: 4px; overflow: hidden; }
        .challenge-barre-remplie { background: white; height: 100%; }
        .aucun-challenge { text-align: center; color: #aaa; font-style: italic; padding: 20px; }
    </style>

    <script src="config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="dashboard.js"></script>

</body>
</html>